webpackJsonp([1],{"5PlU":function(t,e,i){var s=i("RY/4"),a=i("dSzd")("iterator"),n=i("/bQp");t.exports=i("FeBl").isIterable=function(t){var e=Object(t);return void 0!==e[a]||"@@iterator"in e||n.hasOwnProperty(s(e))}},"HIb+":function(t,e,i){"use strict";e.a={name:"Pagination",props:{total:{type:Number,required:!0},page:{type:Number,required:!0},perPage:{type:Number,default:10}},computed:{pages:function(){return Math.ceil(this.total/this.perPage)}}}},OPBX:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("R0bj"),a=i("ujFt"),n=i("VU/8")(s.a,a.a,!1,null,null,null);e.default=n.exports},Qf3P:function(t,e,i){"use strict";var s=i("bXKJ"),a=i("uDPI"),n=i("VU/8")(s.a,a.a,!1,null,null,null);e.a=n.exports},R0bj:function(t,e,i){"use strict";var s=i("bOdI"),a=i.n(s),n=i("d7EF"),r=i.n(n),o=i("Dd8w"),l=i.n(o),u=i("//Fk"),c=i.n(u),f=i("Qf3P"),d=i("hYtS");e.a={name:"user",components:{ArticlePreview:f.a,Pagination:d.a},asyncData:function(t){var e=t.params,i=t.store;return function t(){var s=e.user.slice(1),a={options:{author:s,favorited:s,limit:5,offset:0},tab:"MY",isFollowSubmitting:!1};return i.dispatch("api/request",{promise:c.a.all([i.dispatch("api/getProfile",{username:s}),i.dispatch("api/getArticlesList",{params:l()({},a.options,{favorited:void 0})})]),success:function(t){var e=r()(t,2),i=e[0],s=e[1];return l()({},a,{articles:s.data.articles,articlesCount:s.data.articlesCount,profile:i.data.profile})},fail:function(e){if(401===e.response.status)return i.dispatch("auth/signOut"),t()}})}()},head:function(){return{title:"@"+this.profile.username+" - Conduit"}},computed:{isAuth:function(){return this.$store.getters["auth/isAuth"]},isCurrentUser:function(){return this.isAuth&&this.$store.state.auth.user.username===this.profile.username||!1},offsetToPage:{get:function(){return this.options.offset/this.options.limit+1},set:function(t){this.paginationOnClick(t)}}},methods:{paginationOnClick:function(t){var e=this.options.limit;this.options.offset=e*(t-1),this.getArticlesList()},tabOnClick:function(t){this.tab=t,this.options.offset=0,this.getArticlesList()},getArticlesList:function(){var t=this,e=void 0;return e="MY"===this.tab?"author":"favorited",this.$store.dispatch("api/getArticlesList",{params:a()({limit:this.options.limit,offset:this.options.offset},e,this.options[e])}).then(function(e){t.articles=e.data.articles,t.articlesCount=e.data.articlesCount})},toggleFollowUser:function(){var t=this;if(this.isAuth){var e=this.profile.following?"api/unfollowUser":"api/followUser";this.isFollowSubmitting=!0,this.$store.dispatch(e,{username:this.profile.username}).then(function(e){t.profile=e.data.profile,t.isFollowSubmitting=!1}).catch(function(e){t.isFollowSubmitting=!1})}else this.$router.push({name:"register"})}}}},U0tc:function(t,e,i){"use strict";var s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"article-meta"},[i("nuxt-link",{attrs:{to:{name:"user",params:{user:"@"+t.username}}}},[i("img",{attrs:{src:t.image}})]),i("div",{staticClass:"info"},[i("nuxt-link",{staticClass:"author",attrs:{to:{name:"user",params:{user:"@"+t.username}}}},[t._v("\n      "+t._s(t.username)+"\n    ")]),i("span",{staticClass:"date"},[t._v(t._s(t._f("date")(t.createdAt)))])],1),"PREVIEW"===t.actions?[i("button",{staticClass:"btn btn-sm pull-xs-right",class:t.favorited?"btn-primary":"btn-outline-primary",attrs:{disabled:t.isSubmitting},on:{click:t.toggleFavoriteArticle}},[i("i",{staticClass:"ion-heart"}),t._v(" "+t._s(t.favoritesCount)+"\n    ")])]:"EDIT"===t.actions?[i("nuxt-link",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{to:{name:"editor-slug",params:{slug:t.slug}}}},[i("i",{staticClass:"ion-edit"}),t._v(" Edit Article\n    ")]),t._v("\n      \n    "),i("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{disabled:t.isDeleteSubmitting},on:{click:t.deleteArticle}},[i("i",{staticClass:"ion-trash-a"}),t._v(" Delete Article\n    ")])]:"FOLLOW"===t.actions?[i("button",{staticClass:"btn btn-sm",class:t.following?"btn-secondary":"btn-outline-secondary",attrs:{disabled:t.isFollowSubmitting},on:{click:t.toggleFollowUser}},[i("i",{staticClass:"ion-plus-round"}),t._v("\n        "+t._s(t.following?"Unfollow":"Follow")+"  "+t._s(t.username)+"\n    ")]),t._v("\n      \n    "),i("button",{staticClass:"btn btn-sm",class:t.favorited?"btn-primary":"btn-outline-primary",attrs:{disabled:t.isSubmitting},on:{click:t.toggleFavoriteArticle}},[i("i",{staticClass:"ion-heart"}),t._v("\n        "+t._s(t.favorited?"Unfavorite Article":"Favorite Article")+"\n      "),i("span",{staticClass:"counter"},[t._v(t._s("("+t.favoritesCount+")"))])])]:t._e()],2)},staticRenderFns:[]};e.a=s},Xd32:function(t,e,i){i("+tPU"),i("zQR9"),t.exports=i("5PlU")},bOdI:function(t,e,i){"use strict";e.__esModule=!0;var s=function(t){return t&&t.__esModule?t:{default:t}}(i("C4MV"));e.default=function(t,e,i){return e in t?(0,s.default)(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},bXKJ:function(t,e,i){"use strict";var s=i("pie6");e.a={name:"ArticlePreview",components:{ArticleMeta:s.a},props:{username:{type:String,default:""},image:{type:String,default:""},favorited:{type:Boolean,default:!1},favoritesCount:{type:Number,default:0},createdAt:{type:String,default:""},title:{type:String,default:""},description:{type:String,default:""},slug:{type:String,default:""},tagList:{type:Array,default:function(){return[]}}},computed:{favorited$:{get:function(){return this.favorited},set:function(t){this.$emit("update:favorited",t)}},favoritesCount$:{get:function(){return this.favoritesCount},set:function(t){this.$emit("update:favoritesCount",t)}}}}},d7EF:function(t,e,i){"use strict";e.__esModule=!0;var s=n(i("us/S")),a=n(i("BO1k"));function n(t){return t&&t.__esModule?t:{default:t}}e.default=function(){return function(t,e){if(Array.isArray(t))return t;if((0,s.default)(Object(t)))return function(t,e){var i=[],s=!0,n=!1,r=void 0;try{for(var o,l=(0,a.default)(t);!(s=(o=l.next()).done)&&(i.push(o.value),!e||i.length!==e);s=!0);}catch(t){n=!0,r=t}finally{try{!s&&l.return&&l.return()}finally{if(n)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},f7sO:function(t,e,i){"use strict";e.a={name:"ArticleMeta",props:{actions:{type:String,default:"PREVIEW"},username:{type:String,default:""},image:{type:String,default:""},createdAt:{type:String,default:""},slug:{type:String,default:""},following:{type:Boolean,default:!1},favorited:{type:Boolean,default:!1},favoritesCount:{type:Number,default:0}},data:function(){return{isSubmitting:!1,isDeleteSubmitting:!1,isFollowSubmitting:!1}},computed:{isAuth:function(){return this.$store.getters["auth/isAuth"]}},methods:{toggleFollowUser:function(){var t=this;if(this.isAuth){var e=this.following?"api/unfollowUser":"api/followUser";this.isFollowSubmitting=!0,this.$store.dispatch(e,{username:this.username}).then(function(e){var i=e.data.profile.following;t.isFollowSubmitting=!1,t.$emit("update:following",i)}).catch(function(e){t.isFollowSubmitting=!1})}else this.$router.push({name:"login"})},toggleFavoriteArticle:function(){var t=this;if(this.isAuth){var e=this.favorited?"api/unfavoriteArticle":"api/favoriteArticle";this.isSubmitting=!0,this.$store.dispatch(e,{slug:this.slug}).then(function(e){var i=e.data.article,s=i.favorited,a=i.favoritesCount;t.isSubmitting=!1,t.$emit("update:favorited",s),t.$emit("update:favoritesCount",a)}).catch(function(e){t.isSubmitting=!1})}else this.$router.push({name:"login"})},deleteArticle:function(){var t=this;this.isDeleteSubmitting=!0,this.$store.dispatch("api/deleteArticle",{slug:this.slug}).then(function(e){t.isDeleteSubmitting=!1,t.$router.push({name:"index"})}).catch(function(e){t.isDeleteSubmitting=!1})}}}},hYtS:function(t,e,i){"use strict";var s=i("HIb+"),a=i("kyeW"),n=i("VU/8")(s.a,a.a,!1,null,null,null);e.a=n.exports},kyeW:function(t,e,i){"use strict";var s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("nav",[i("ul",{staticClass:"pagination"},t._l(t.pages,function(e){return i("li",{key:"page-"+e,staticClass:"page-item",class:{active:e===t.page}},[i("a",{staticClass:"page-link",attrs:{href:""},on:{click:function(i){i.preventDefault(),t.$emit("update:page",e)}}},[t._v(t._s(e))])])}))])},staticRenderFns:[]};e.a=s},pie6:function(t,e,i){"use strict";var s=i("f7sO"),a=i("U0tc"),n=i("VU/8")(s.a,a.a,!1,null,null,null);e.a=n.exports},uDPI:function(t,e,i){"use strict";var s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"article-preview"},[i("article-meta",{attrs:{actions:"PREVIEW",username:t.username,image:t.image,createdAt:t.createdAt,favorited:t.favorited$,favoritesCount:t.favoritesCount$,slug:t.slug},on:{"update:favorited":function(e){t.favorited$=e},"update:favoritesCount":function(e){t.favoritesCount$=e}}}),i("nuxt-link",{staticClass:"preview-link",attrs:{to:{name:"article-slug",params:{slug:t.slug}}}},[i("h1",[t._v(t._s(t.title))]),i("p",[t._v(t._s(t.description))]),i("span",[t._v("Read more...")]),i("ul",{staticClass:"tag-list"},t._l(t.tagList,function(e,s){return i("li",{key:e+s,staticClass:"tag-default tag-pill tag-outline"},[t._v(t._s(e))])}))])],1)},staticRenderFns:[]};e.a=s},ujFt:function(t,e,i){"use strict";var s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"profile-page"},[i("div",{staticClass:"user-info"},[i("div",{staticClass:"container"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-xs-12 col-md-10 offset-md-1"},[i("img",{staticClass:"user-img",attrs:{src:t.profile.image}}),i("h4",[t._v(t._s(t.profile.username))]),i("p",[t._v(t._s(t.profile.bio))]),t.isCurrentUser?i("nuxt-link",{staticClass:"btn btn-sm btn-outline-secondary action-btn",attrs:{to:{name:"settings"}}},[i("i",{staticClass:"ion-gear-a"}),t._v("\n              Edit Profile Settings\n          ")]):i("button",{staticClass:"btn btn-sm btn-outline-secondary action-btn",on:{click:t.toggleFollowUser}},[i("i",{staticClass:"ion-plus-round"}),t._v("\n              "+t._s(t.isAuth&&t.profile.following?"Unfollow":"Follow")+" "+t._s(t.profile.username)+"\n          ")])],1)])])]),i("div",{staticClass:"container"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-xs-12 col-md-10 offset-md-1"},[i("div",{staticClass:"articles-toggle"},[i("ul",{staticClass:"nav nav-pills outline-active"},[i("li",{staticClass:"nav-item"},[i("a",{staticClass:"nav-link",class:{active:"MY"===t.tab},attrs:{href:""},on:{click:function(e){e.preventDefault(),t.tabOnClick("MY")}}},[t._v("My Articles")])]),i("li",{staticClass:"nav-item"},[i("a",{staticClass:"nav-link",class:{active:"FAV"===t.tab},attrs:{href:""},on:{click:function(e){e.preventDefault(),t.tabOnClick("FAV")}}},[t._v("Favorited Articles")])])])]),t._l(t.articles,function(e){return i("article-preview",{key:e.slug,attrs:{username:e.author.username,image:e.author.image,favorited:e.favorited,"favorites-count":e.favoritesCount,"created-at":e.createdAt,title:e.title,description:e.description,slug:e.slug,"tag-list":e.tagList},on:{"update:favorited":function(i){t.$set(e,"favorited",i)},"update:favoritesCount":function(i){t.$set(e,"favoritesCount",i)}}})}),t.articles.length?t._e():i("div",{staticClass:"article-preview"},[t._v("No articles are here... yet.")]),i("pagination",{attrs:{total:t.articlesCount,page:t.offsetToPage,"per-page":t.options.limit},on:{"update:page":function(e){t.offsetToPage=e}}})],2)])])])},staticRenderFns:[]};e.a=s},"us/S":function(t,e,i){t.exports={default:i("Xd32"),__esModule:!0}}});