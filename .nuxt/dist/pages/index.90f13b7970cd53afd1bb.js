webpackJsonp([2],{"/TYz":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("pXkj"),a=i("wfZU"),n=i("VU/8")(s.a,a.a,!1,null,null,null);e.default=n.exports},"5PlU":function(t,e,i){var s=i("RY/4"),a=i("dSzd")("iterator"),n=i("/bQp");t.exports=i("FeBl").isIterable=function(t){var e=Object(t);return void 0!==e[a]||"@@iterator"in e||n.hasOwnProperty(s(e))}},"HIb+":function(t,e,i){"use strict";e.a={name:"Pagination",props:{total:{type:Number,required:!0},page:{type:Number,required:!0},perPage:{type:Number,default:10}},computed:{pages:function(){return Math.ceil(this.total/this.perPage)}}}},Qf3P:function(t,e,i){"use strict";var s=i("bXKJ"),a=i("uDPI"),n=i("VU/8")(s.a,a.a,!1,null,null,null);e.a=n.exports},Xd32:function(t,e,i){i("+tPU"),i("zQR9"),t.exports=i("5PlU")},bXKJ:function(t,e,i){"use strict";var s=i("pie6");e.a={name:"ArticlePreview",components:{ArticleMeta:s.a},props:{username:{type:String,default:""},image:{type:String,default:""},favorited:{type:Boolean,default:!1},favoritesCount:{type:Number,default:0},createdAt:{type:String,default:""},title:{type:String,default:""},description:{type:String,default:""},slug:{type:String,default:""},tagList:{type:Array,default:function(){return[]}}},computed:{favorited$:{get:function(){return this.favorited},set:function(t){this.$emit("update:favorited",t)}},favoritesCount$:{get:function(){return this.favoritesCount},set:function(t){this.$emit("update:favoritesCount",t)}}}}},d7EF:function(t,e,i){"use strict";e.__esModule=!0;var s=n(i("us/S")),a=n(i("BO1k"));function n(t){return t&&t.__esModule?t:{default:t}}e.default=function(){return function(t,e){if(Array.isArray(t))return t;if((0,s.default)(Object(t)))return function(t,e){var i=[],s=!0,n=!1,r=void 0;try{for(var o,l=(0,a.default)(t);!(s=(o=l.next()).done)&&(i.push(o.value),!e||i.length!==e);s=!0);}catch(t){n=!0,r=t}finally{try{!s&&l.return&&l.return()}finally{if(n)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},f7sO:function(t,e,i){"use strict";e.a={name:"ArticleMeta",props:{actions:{type:String,default:"PREVIEW"},username:{type:String,default:""},image:{type:String,default:""},createdAt:{type:String,default:""},slug:{type:String,default:""},following:{type:Boolean,default:!1},favorited:{type:Boolean,default:!1},favoritesCount:{type:Number,default:0}},data:function(){return{isSubmitting:!1,isDeleteSubmitting:!1,isFollowSubmitting:!1}},computed:{isAuth:function(){return this.$store.getters["auth/isAuth"]}},methods:{toggleFollowUser:function(){var t=this;if(this.isAuth){var e=this.following?"api/unfollowUser":"api/followUser";this.isFollowSubmitting=!0,this.$store.dispatch("api/request",{promise:this.$store.dispatch(e,{username:this.username}),success:function(e){var i=e.data.profile.following;t.isFollowSubmitting=!1,t.$emit("update:following",i)}})}else this.$router.push({name:"login"})},toggleFavoriteArticle:function(){var t=this;if(this.isAuth){var e=this.favorited?"api/unfavoriteArticle":"api/favoriteArticle";this.isSubmitting=!0,this.$store.dispatch("api/request",{promise:this.$store.dispatch(e,{slug:this.slug}),success:function(e){var i=e.data.article,s=i.favorited,a=i.favoritesCount;t.isSubmitting=!1,t.$emit("update:favorited",s),t.$emit("update:favoritesCount",a)}})}else this.$router.push({name:"login"})},deleteArticle:function(){var t=this;this.isDeleteSubmitting=!0,this.$store.dispatch("api/request",{promise:this.$store.dispatch("api/deleteArticle",{slug:this.slug}),success:function(e){t.isDeleteSubmitting=!1,t.$router.push({name:"index"})}})}}}},hYtS:function(t,e,i){"use strict";var s=i("HIb+"),a=i("kyeW"),n=i("VU/8")(s.a,a.a,!1,null,null,null);e.a=n.exports},kyeW:function(t,e,i){"use strict";var s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("nav",[i("ul",{staticClass:"pagination"},t._l(t.pages,function(e){return i("li",{key:"page-"+e,staticClass:"page-item",class:{active:e===t.page}},[i("a",{staticClass:"page-link",attrs:{href:""},on:{click:function(i){i.preventDefault(),t.$emit("update:page",e)}}},[t._v(t._s(e))])])}))])},staticRenderFns:[]};e.a=s},pXkj:function(t,e,i){"use strict";var s=i("Dd8w"),a=i.n(s),n=i("d7EF"),r=i.n(n),o=i("//Fk"),l=i.n(o),u=i("Qf3P"),c=i("hYtS");e.a={name:"Home",components:{ArticlePreview:u.a,Pagination:c.a},asyncData:function(t){var e=t.store,i=(t.redirect,function t(i){var s=void 0,n={articleListOptions:{limit:10,offset:0,tag:null}};return"GLOBAL"===i?s="api/getArticlesList":"YOUR"===i&&(s="api/getArticleFeedsList"),e.dispatch("api/request",{promise:l.a.all([e.dispatch(s,{params:n.articleListOptions}),e.dispatch("api/getTags")]),success:function(t){var e=r()(t,2),s=e[0],o=e[1];return a()({},n,{tabCurrent:i,feeds:s.data.articles,feedsTotal:s.data.articlesCount,tagList:o.data.tags})},fail:function(i){if(401===i.response.status)return e.dispatch("auth/signOut"),t("GLOBAL")}})});return e.getters["auth/isAuth"]?i("YOUR"):i("GLOBAL")},head:function(){return{title:"Home - Conduit"}},computed:{offsetToPage:{get:function(){return this.articleListOptions.offset/this.articleListOptions.limit+1},set:function(t){this.paginationOnClick(t)}},isAuth:function(){return this.$store.getters["auth/isAuth"]}},methods:{paginationOnClick:function(t){var e=this.articleListOptions.limit;this.articleListOptions.offset=e*(t-1),this.getArticlesList()},tagOnClick:function(t){this.articleListOptions.tag!==t&&(this.articleListOptions.tag=t,this.tabOnClick("TAG"))},tabOnClick:function(t){this.tabCurrent=t,this.articleListOptions.offset=0,"TAG"!==this.tabCurrent&&(this.articleListOptions.tag=null),this.getArticlesList()},getArticlesList:function(){var t=this,e="";"TAG"===this.tabCurrent||"GLOBAL"===this.tabCurrent?e="api/getArticlesList":"YOUR"===this.tabCurrent&&(e="api/getArticleFeedsList"),this.$store.dispatch("api/request",{promise:this.$store.dispatch(e,{params:this.articleListOptions}),success:function(e){t.feeds=e.data.articles,t.feedsTotal=e.data.articlesCount}})}}}},pie6:function(t,e,i){"use strict";var s=i("f7sO"),a=i("zDtA"),n=i("VU/8")(s.a,a.a,!1,null,null,null);e.a=n.exports},uDPI:function(t,e,i){"use strict";var s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"article-preview"},[i("article-meta",{attrs:{actions:"PREVIEW",username:t.username,image:t.image,createdAt:t.createdAt,favorited:t.favorited$,favoritesCount:t.favoritesCount$,slug:t.slug},on:{"update:favorited":function(e){t.favorited$=e},"update:favoritesCount":function(e){t.favoritesCount$=e}}}),i("nuxt-link",{staticClass:"preview-link",attrs:{to:{name:"article-slug",params:{slug:t.slug}}}},[i("h1",[t._v(t._s(t.title))]),i("p",[t._v(t._s(t.description))]),i("span",[t._v("Read more...")]),i("ul",{staticClass:"tag-list"},t._l(t.tagList,function(e,s){return i("li",{key:e+s,staticClass:"tag-default tag-pill tag-outline"},[t._v(t._s(e))])}))])],1)},staticRenderFns:[]};e.a=s},"us/S":function(t,e,i){t.exports={default:i("Xd32"),__esModule:!0}},wfZU:function(t,e,i){"use strict";var s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home-page"},[t._m(0),i("div",{staticClass:"container page"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-xs-12 col-md-9"},[i("div",{staticClass:"feed-toggle"},[i("ul",{staticClass:"nav nav-pills outline-active"},[t.isAuth?i("li",{staticClass:"nav-item"},[i("a",{staticClass:"nav-link",class:{active:"YOUR"===t.tabCurrent},attrs:{href:""},on:{click:function(e){e.preventDefault(),t.tabOnClick("YOUR")}}},[t._v("Your Feed")])]):t._e(),i("li",{staticClass:"nav-item"},[i("a",{staticClass:"nav-link",class:{active:"GLOBAL"===t.tabCurrent},attrs:{href:""},on:{click:function(e){e.preventDefault(),t.tabOnClick("GLOBAL")}}},[t._v("Global Feed")])]),"TAG"===t.tabCurrent?i("li",{staticClass:"nav-item"},[i("a",{staticClass:"nav-link active"},[t._v(t._s("# "+t.articleListOptions.tag))])]):t._e()])]),t._l(t.feeds,function(e){return i("article-preview",{key:e.slug,attrs:{username:e.author.username,image:e.author.image,favorited:e.favorited,"favorites-count":e.favoritesCount,"created-at":e.createdAt,title:e.title,description:e.description,slug:e.slug,"tag-list":e.tagList},on:{"update:favorited":function(i){t.$set(e,"favorited",i)},"update:favoritesCount":function(i){t.$set(e,"favoritesCount",i)}}})}),i("pagination",{attrs:{total:t.feedsTotal,page:t.offsetToPage,"per-page":t.articleListOptions.limit},on:{"update:page":function(e){t.offsetToPage=e}}})],2),i("div",{staticClass:"col-xs-12 col-md-3"},[i("div",{staticClass:"sidebar"},[i("p",[t._v("Popular Tags")]),i("div",{staticClass:"tag-list"},t._l(t.tagList,function(e,s){return i("a",{key:e+s,staticClass:"tag-pill tag-default",attrs:{href:""},on:{click:function(i){i.preventDefault(),t.tagOnClick(e)}}},[t._v(t._s(e))])}))])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"banner"},[e("div",{staticClass:"container"},[e("h1",{staticClass:"logo-font"},[this._v("conduit")]),e("p",[this._v("A place to share your knowledge.")])])])}]};e.a=s},zDtA:function(t,e,i){"use strict";var s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"article-meta"},[i("nuxt-link",{attrs:{to:{name:"user",params:{user:"@"+t.username}}}},[i("img",{attrs:{src:t.image}})]),i("div",{staticClass:"info"},[i("nuxt-link",{staticClass:"author",attrs:{to:{name:"user",params:{user:"@"+t.username}}}},[t._v("\n      "+t._s(t.username)+"\n    ")]),i("span",{staticClass:"date"},[t._v(t._s(t._f("date")(t.createdAt)))])],1),"PREVIEW"===t.actions?[i("button",{staticClass:"btn btn-sm pull-xs-right",class:t.favorited?"btn-primary":"btn-outline-primary",attrs:{disabled:t.isSubmitting},on:{click:t.toggleFavoriteArticle}},[i("i",{staticClass:"ion-heart"}),t._v(" "+t._s(t.favoritesCount)+"\n    ")])]:"EDIT"===t.actions?[i("nuxt-link",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{to:{name:"editor-slug",params:{slug:t.slug}}}},[i("i",{staticClass:"ion-edit"}),t._v(" Edit Article\n    ")]),t._v("\n      \n    "),i("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{disabled:t.isDeleteSubmitting},on:{click:t.deleteArticle}},[i("i",{staticClass:"ion-trash-a"}),t._v(" Delete Article\n    ")])]:"FOLLOW"===t.actions?[i("button",{staticClass:"btn btn-sm",class:t.following?"btn-secondary":"btn-outline-secondary",attrs:{disabled:t.isFollowSubmitting},on:{click:t.toggleFollowUser}},[i("i",{staticClass:"ion-plus-round"}),t._v("\n        "+t._s(t.following?"Unfollow":"Follow")+"  "+t._s(t.username)+"\n    ")]),t._v("\n      \n    "),i("button",{staticClass:"btn btn-sm",class:t.favorited?"btn-primary":"btn-outline-primary",attrs:{disabled:t.isSubmitting},on:{click:t.toggleFavoriteArticle}},[i("i",{staticClass:"ion-heart"}),t._v("\n        "+t._s(t.favorited?"Unfavorite Article":"Favorite Article")+"\n      "),i("span",{staticClass:"counter"},[t._v(t._s("("+t.favoritesCount+")"))])])]:t._e()],2)},staticRenderFns:[]};e.a=s}});