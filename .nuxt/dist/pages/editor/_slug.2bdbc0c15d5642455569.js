webpackJsonp([6],{"+DqA":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r("UgXW"),i=r("FZN3"),a=r("VU/8")(s.a,i.a,!1,null,null,null);e.default=a.exports},"9K+V":function(t,e,r){"use strict";var s=r("fZjL"),i=r.n(s);e.a={name:"ErrorMessages",props:{error:{type:Object,default:function(){return{}}}},computed:{errFormatted:function(){var t=this;return i()(this.error).reduce(function(e,r){var s=t.error[r].map(function(t){return r+" "+t});return e.concat(s)},[])}}}},FZN3:function(t,e,r){"use strict";var s={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"editor-page"},[r("div",{staticClass:"container page"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12 col-md-10 offset-md-1"},[r("error-messages",{directives:[{name:"show",rawName:"v-show",value:Object.keys(t.error).length,expression:"Object.keys(error).length"}],attrs:{error:t.error}}),r("form",{on:{submit:function(e){return e.preventDefault(),t.crateArticle(e)}}},[r("fieldset",[r("fieldset",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"form-control form-control-lg",attrs:{type:"text",placeholder:"Article Title",disabled:t.submitting},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),r("fieldset",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form-control",attrs:{type:"text",placeholder:"What's this article about?",disabled:t.submitting},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})]),r("fieldset",{staticClass:"form-group"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.body,expression:"body"}],staticClass:"form-control",attrs:{rows:"8",placeholder:"Write your article (in markdown)",disabled:t.submitting},domProps:{value:t.body},on:{input:function(e){e.target.composing||(t.body=e.target.value)}}})]),r("fieldset",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.tagInput,expression:"tagInput"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter tags",disabled:t.submitting},domProps:{value:t.tagInput},on:{keypress:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault(),t.addTag(t.tagInput)},input:function(e){e.target.composing||(t.tagInput=e.target.value)}}}),r("div",{staticClass:"tag-list"},t._l(t.tagList,function(e,s){return r("span",{key:e+s,staticClass:"tag-default tag-pill"},[r("i",{staticClass:"ion-close-round",on:{click:function(r){t.removeTag(e)}}}),t._v("\n                  "+t._s(e)+"\n                ")])}))]),r("button",{staticClass:"btn btn-lg pull-xs-right btn-primary",attrs:{disabled:t.submitting}},[t._v("\n              Publish Article\n            ")])])])],1)])])])},staticRenderFns:[]};e.a=s},MZAm:function(t,e,r){"use strict";var s=r("9K+V"),i=r("QmkN"),a=r("VU/8")(s.a,i.a,!1,null,null,null);e.a=a.exports},QmkN:function(t,e,r){"use strict";var s={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"error-messages"},t._l(t.errFormatted,function(e,s){return r("li",{key:s},[t._v(t._s(e))])}))},staticRenderFns:[]};e.a=s},UgXW:function(t,e,r){"use strict";var s=r("Dd8w"),i=r.n(s),a=r("MZAm");e.a={name:"editor",components:{ErrorMessages:a.a},asyncData:function(t){var e=t.params,r=t.store,s={title:"",description:"",body:"",tagList:[],tagInput:"",submitting:!1,error:{}};return e.slug?r.dispatch("api/getArticle",{slug:e.slug}).then(function(t){var e=t.data.article,r=e.title,a=e.description,n=e.body,o=e.tagList;return i()({},s,{title:r,description:a,body:n,tagList:o})}):s},methods:{addTag:function(t){-1===this.tagList.indexOf(t)&&(this.tagList.push(t),this.tagInput="")},removeTag:function(t){var e=this.tagList.findIndex(function(e){return e===t});this.tagList.splice(e,1)},crateArticle:function(){var t=this,e=this.$route.params.slug?"api/updateArticle":"api/createArticle";this.submitting=!0,this.$store.dispatch(e,{slug:this.$route.params.slug,data:{article:{title:this.title,description:this.description,body:this.body,tagList:this.tagList}}}).then(function(e){t.$router.push({name:"article-slug",params:{slug:e.data.article.slug}})}).catch(function(e){t.submitting=!1,t.error=e.response.data.errors})}}}}});